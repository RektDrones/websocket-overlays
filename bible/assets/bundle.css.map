{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/App.svelte",
    "../src/Keypad.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { onMount, onDestroy } from \"svelte\";\n  import { doConnect, doDisconnect, sendCommand } from \"./websocket-client.js\";\n  import Keypad from \"./Keypad.svelte\";\n  import biblia from \"./roh.json\";\n\n  let shown = false;\n  let line1 = '';\n  let line2 = '';\n  let lastAddresses = [\n    {book: \"gn\", chapter: 1, verse: 1},\n    {book: \"z\", chapter: 150, verse: 1},\n    {book: \"jn\", chapter: 3, verse: 16},\n  ];\n\n  // Filter out deuteronomy books\n  let books = biblia.books.filter(book => book.category != 'deut');\n  let booksByAbbr = new Map();\n  books.forEach(book => {booksByAbbr[book.abbreviation] = book});\n\n  let bookFilter = \"\";\n  let aBook;\n\n  let selected = {\n    book: \"gn\",\n    chapter: 1,\n    verse: 1,\n  }\n\n  $: filteredBooks = bookFilter\n    ? books.filter(matchesBook)\n    : books;\n  $: filteredLastAddresses = bookFilter\n    ? lastAddresses.filter(h => matchesBook(booksByAbbr[h.book]))\n    : lastAddresses;\n\n  const matchesBook = (book) => {\n    const prefix = bookFilter.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase();\n    const bookLower = book.name.normalize('NFD').replace(/[\\u0300-\\u036f]/g, \"\").toLowerCase();\n    return (\n      bookLower.startsWith(prefix) ||\n      book.abbreviation.startsWith(prefix) ||\n      (book.aliases && book.aliases.some(a => a.toLowerCase().startsWith(prefix))) ||\n      (prefix.length >= 2 && bookLower.includes(' '+prefix))\n    );\n  }\n\n  $: aBook = booksByAbbr[selected.book];\n  $: line1 = addressAsString(selected);\n  $: line2 = aBook.chapters[selected.chapter] ? aBook.chapters[selected.chapter][selected.verse-1] || '' : '';\n\n  onMount(async () => {\n    doConnect(onMessage);\n  });\n\n  onDestroy(async () => {\n    doDisconnect();\n  });\n\n  function addToLastAddresses(address) {\n    lastAddresses.unshift({\n      book: address.book,\n      chapter: address.chapter,\n      verse: address.verse,\n    })\n    lastAddresses = lastAddresses.filter((h,i) =>\n      i === 0 ||\n      h.book != address.book ||\n      h.chapter != address.chapter ||\n      h.verse != address.verse\n    )\n  }\n  const addressAsString = (address) => (booksByAbbr[address.book].name + ' ' + address.chapter + (address.verse ? ','+address.verse : ''));\n  const equalAddresses = (a1, a2) => (\n      a1.book == a2.book &&\n      a1.chapter == a2.chapter &&\n      a1.verse == a2.verse\n  );\n  function selectAddress(address) {\n    return () => {\n      selected.book = address.book;\n      selected.chapter = address.chapter || '';\n      selected.verse = address.verse || '';\n    }\n  }\n  function removeLastAddress(j) {\n    return () => {\n    lastAddresses = lastAddresses.filter((h, i) => (i !== j));\n    }\n  }\n\n  function updateLine() {\n    sendCommand({\n      line1: line1,\n      line2: line2,\n      address: selected,\n    });\n  }\n  function toggleLine() {\n    shown = !shown;\n    const data = {\n      show: shown\n    };\n    if (shown) {\n      addToLastAddresses(selected);\n      data.line1 = line1;\n      data.line2 = line2;\n      data.history = lastAddresses;\n    }\n    sendCommand(data);\n  }\n\n  function onMessage(data) {\n    console.log('Recieved websocket message', data);\n    if (data.hasOwnProperty(\"show\")) {\n      shown = data.show;\n    }\n    if (data.hasOwnProperty(\"address\")) {\n      selected = data.address;\n    }\n    if (data.hasOwnProperty(\"history\")) {\n      lastAddresses = data.history;\n    }\n  }\n\n</script>\n\n<style>\n  .control-button {\n    width: 6rem;\n    /* float: right; */\n  }\n  .books-filter,\n  .address-filter {\n    display: block;\n    width: 49%;\n    margin: 0 1% 0 0;\n    padding: 0;\n    height: 10rem;\n    overflow: scroll;\n    float: left;\n  }\n  .book-item {\n    width: 100%;\n    margin: 0 0 .25rem 0;\n    padding: .25rem .5rem;\n    text-align: left;\n  }\n  .address-item {\n    width: 100%;\n    margin: 0 0 .25rem 0;\n  }\n  .address-set {\n    width: auto;\n    padding: .25rem .5rem;\n    margin: 0;\n    text-align: left;\n  }\n  .address-remove {\n    margin: 0;\n    max-width: 2rem;\n    padding: .25rem .5rem;\n  }\n  .vers,\n  .address {\n    color: white;\n  }\n  :global(body) {\n    color: white;\n  }\n</style>\n\n<div class=\"input-group\" style=\"width: 100%; display: flex;\">\n  <input class=\"form-control\" type=\"text\" placeholder=\"filter\" bind:value={bookFilter} />\n  <button type=\"button\" class=\"form-control btn btn-secondary\" on:click={()=>{bookFilter=''}} style=\"max-width: 2rem;\">×</button>\n</div>\n<div class=\"books-filter\">\n  {#each filteredBooks as book}\n  <button class=\"book-item btn\" class:btn-primary={book.abbreviation==selected.book} on:click={selectAddress({book: book.abbreviation})}>{book.name}</button>\n  {/each}\n</div>\n<div class=\"address-filter\">\n  {#each filteredLastAddresses as address, i}\n  <div class=\"address-item btn-group\">\n    <button class=\"address-set btn\" class:btn-primary={equalAddresses(address, selected)} on:click={selectAddress(address)}>{addressAsString(address)}</button>\n    <button class=\"btn address-remove\" on:click={removeLastAddress(i)}>×</button>\n  </div>\n  {/each}\n</div>\n\n<div style=\"display: inline-block; margin: 0 .5rem 0 0;\">\n  Kapitola: {selected.chapter}\n  <Keypad bind:value={selected.chapter} max={Object.keys(aBook.chapters).length} />\n</div>\n<div style=\"display: inline-block;\">\n  Verš: {selected.verse}\n  <Keypad bind:value={selected.verse} max={(aBook.chapters[selected.chapter]||[]).length} />\n</div>\n\n<button class=\"control-button btn\" on:click={toggleLine} class:btn-danger={shown} class:btn-success={!shown}>\n  {#if shown}Skryť{:else}Zobraziť{/if}\n</button>\n<button class=\"control-button btn btn-primary\" on:click={updateLine}>Zmeniť</button>\n<div class=\"address\">{line1}</div>\n<span class=\"vers\">{@html line2}</span>\n\n",
    "<script>\n  import { createEventDispatcher } from \"svelte\";\n\n  export let value = \"\";\n  export let max = 99999999;\n\n  const dispatch = createEventDispatcher();\n\n  const select = num => () => {value = Math.min(+value * 10 + num, max||99999999)};\n  const decrement = () => {value = Math.max(1, +value - 1)};\n  const increment = () => {value = Math.min(+value + 1, max||99999999)};\n  const clear = () => {value = \"\"};\n  const backspace = () => {value = Math.floor(+value / 10) || ''};\n</script>\n\n<style>\n  .keypad {\n    display: grid;\n    grid-template-columns: repeat(3, 2.8rem);\n    grid-template-rows: repeat(5, 2.8rem);\n    grid-gap: 0.2rem;\n    margin: 0 0 0.5rem 0;\n  }\n\n  button {\n    margin: 0;\n    line-height: 2rem;\n    width: 2.8rem;\n  }\n</style>\n\n<div class=\"keypad\">\n  <button class=\"btn btn-primary\" on:click={select(1)}>1</button>\n  <button class=\"btn btn-primary\" on:click={select(2)}>2</button>\n  <button class=\"btn btn-primary\" on:click={select(3)}>3</button>\n\n  <button class=\"btn btn-primary\" on:click={select(4)}>4</button>\n  <button class=\"btn btn-primary\" on:click={select(5)}>5</button>\n  <button class=\"btn btn-primary\" on:click={select(6)}>6</button>\n\n  <button class=\"btn btn-primary\" on:click={select(7)}>7</button>\n  <button class=\"btn btn-primary\" on:click={select(8)}>8</button>\n  <button class=\"btn btn-primary\" on:click={select(9)}>9</button>\n\n  <button class=\"btn btn-primary\" on:click={backspace} disabled={!value}>←</button>\n  <button class=\"btn btn-primary\" on:click={select(0)}>0</button>\n  <button class=\"btn btn-primary\" on:click={clear} disabled={!value} >C</button>\n\n  <button class=\"btn btn-primary\" on:click={decrement} disabled={value <= 1}>-1</button>\n  <button class=\"btn btn-primary\" on:click={increment} disabled={value == max}>+1</button>\n</div>\n"
  ],
  "names": [],
  "mappings": "AAgIE,eAAe,eAAC,CAAC,AACf,KAAK,CAAE,IAAI,AAEb,CAAC,AACD,4BAAa,CACb,eAAe,eAAC,CAAC,AACf,OAAO,CAAE,KAAK,CACd,KAAK,CAAE,GAAG,CACV,MAAM,CAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAChB,OAAO,CAAE,CAAC,CACV,MAAM,CAAE,KAAK,CACb,QAAQ,CAAE,MAAM,CAChB,KAAK,CAAE,IAAI,AACb,CAAC,AACD,UAAU,eAAC,CAAC,AACV,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CACpB,OAAO,CAAE,MAAM,CAAC,KAAK,CACrB,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,aAAa,eAAC,CAAC,AACb,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,AACtB,CAAC,AACD,YAAY,eAAC,CAAC,AACZ,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,MAAM,CAAC,KAAK,CACrB,MAAM,CAAE,CAAC,CACT,UAAU,CAAE,IAAI,AAClB,CAAC,AACD,eAAe,eAAC,CAAC,AACf,MAAM,CAAE,CAAC,CACT,SAAS,CAAE,IAAI,CACf,OAAO,CAAE,MAAM,CAAC,KAAK,AACvB,CAAC,AACD,oBAAK,CACL,QAAQ,eAAC,CAAC,AACR,KAAK,CAAE,KAAK,AACd,CAAC,AACO,IAAI,AAAE,CAAC,AACb,KAAK,CAAE,KAAK,AACd,CAAC;ACzJD,OAAO,eAAC,CAAC,AACP,OAAO,CAAE,IAAI,CACb,qBAAqB,CAAE,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CACxC,kBAAkB,CAAE,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CACrC,QAAQ,CAAE,MAAM,CAChB,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,AACtB,CAAC,AAED,MAAM,eAAC,CAAC,AACN,MAAM,CAAE,CAAC,CACT,WAAW,CAAE,IAAI,CACjB,KAAK,CAAE,MAAM,AACf,CAAC"
}